'use client';

import { useState } from 'react';
import Image from 'next/image';

// Custom SVG icon components
const ArrowLeft = ({ className }: { className?: string }) => (
    <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="m12 19-7-7 7-7" />
        <path d="M19 12H5" />
    </svg>
);

const Book = ({ className }: { className?: string }) => (
    <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20" />
    </svg>
);

const Globe = ({ className }: { className?: string }) => (
    <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="12" cy="12" r="10" />
        <path d="m6 12 4-4 4 4" />
        <path d="m6 12 4 4 4-4" />
    </svg>
);

const Crown = ({ className }: { className?: string }) => (
    <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14" />
    </svg>
);

const Building = ({ className }: { className?: string }) => (
    <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <rect width="16" height="20" x="4" y="2" rx="2" ry="2" />
        <path d="M9 22v-4h6v4" />
        <path d="M8 6h.01" />
        <path d="M16 6h.01" />
        <path d="M12 6h.01" />
        <path d="M12 10h.01" />
        <path d="M12 14h.01" />
        <path d="M16 10h.01" />
        <path d="M16 14h.01" />
        <path d="M8 10h.01" />
        <path d="M8 14h.01" />
    </svg>
);

const Rocket = ({ className }: { className?: string }) => (
    <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z" />
        <path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2" />
        <path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0" />
        <path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5" />
    </svg>
);

const Brain = ({ className }: { className?: string }) => (
    <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z" />
        <path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z" />
        <path d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4" />
        <path d="M17.599 6.5a3 3 0 0 0 .399-1.375" />
        <path d="M6.003 5.125A3 3 0 0 0 6.401 6.5" />
        <path d="M3.477 10.896a4 4 0 0 1 .585-.396" />
        <path d="M19.938 10.5a4 4 0 0 1 .585.396" />
        <path d="M6 18a4 4 0 0 1-1.967-.516" />
        <path d="M19.967 17.484A4 4 0 0 1 18 18" />
    </svg>
);

const CheckCircle = ({ className }: { className?: string }) => (
    <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
        <path d="m9 11 3 3L22 4" />
    </svg>
);

const XCircle = ({ className }: { className?: string }) => (
    <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="12" cy="12" r="10" />
        <path d="m15 9-6 6" />
        <path d="m9 9 6 6" />
    </svg>
);

const RotateCcw = ({ className }: { className?: string }) => (
    <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
        <path d="M3 3v5h5" />
    </svg>
);

const BookOpen = ({ className }: { className?: string }) => (
    <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M2 3h6l4 4 4-4h6v18H2V3z" />
        <path d="M6 8v13" />
        <path d="M18 8v13" />
    </svg>
);

interface InlineImage {
    url: string;
    caption: string;
    alt: string;
}

// Базовый интерфейс для всех типов вопросов
interface BaseQuestion {
    id: string;
    question: string;
    explanation: string;
    type: 'single' | 'multiple' | 'text' | 'matching';
}

// Одиночный выбор
interface SingleChoiceQuestion extends BaseQuestion {
    type: 'single';
    options: string[];
    correctAnswer: number;
}

// Множественный выбор
interface MultipleChoiceQuestion extends BaseQuestion {
    type: 'multiple';
    options: string[];
    correctAnswers: number[];
}

// Текстовый ответ
interface TextAnswerQuestion extends BaseQuestion {
    type: 'text';
    correctAnswer: string;
    caseSensitive?: boolean;
}

// Соответствие
interface MatchingQuestion extends BaseQuestion {
    type: 'matching';
    leftColumn: { id: number; text: string }[];
    rightColumn: { id: string; text: string }[];
    correctMatches: { leftId: number; rightId: string }[];
    leftTitle?: string;
    rightTitle?: string;
}

type Question = SingleChoiceQuestion | MultipleChoiceQuestion | TextAnswerQuestion | MatchingQuestion;

interface Quiz {
    questions: Question[];
}

interface GlossaryTerm {
    term: string;
    definition: string;
}

interface Topic {
    id: string;
    title: string;
    content: string;
    image: string;
    inlineImages?: InlineImage[];
}

interface Section {
    id: string;
    title: string;
    description: string;
    icon: React.ComponentType<any>;
    topics: Topic[];
    quiz: Quiz;
    glossary: GlossaryTerm[];
}


// Компонент для встроенных изображений
const InlineImageComponent: React.FC<{ inlineImage: InlineImage }> = ({ inlineImage }) => {
    return (
        <div className="my-6">
            <Image
                src={inlineImage.url}
                alt={inlineImage.alt}
                width={800}  // Или динамически: используй naturalWidth из onLoad, но для простоты фиксируй max
                height={600} // Пример пропорций; height="auto" в CSS сделает auto
                className="w-full h-auto max-h-96 object-contain rounded-lg border-2 border-amber-300"
                sizes="(max-width: 768px) 100vw, 800px"  // Для responsive, чтобы не грузило лишнее
            />
            <div className="text-center text-sm text-amber-700 mt-2 italic">
                {inlineImage.caption}
            </div>
        </div>
    );
};

// Функция для парсинга контента с форматированием и изображениями
const parseContentWithImages = (content: string, inlineImages?: InlineImage[]) => {
    if (!inlineImages || inlineImages.length === 0) {
        return <FormattedText content={content} />;
    }

    const parts = content.split(/(\[INLINE_IMAGE_\d+\])/);

    return (
        <div className="leading-relaxed">
            {parts.map((part, index) => {
                const imageMatch = part.match(/\[INLINE_IMAGE_(\d+)\]/);
                if (imageMatch) {
                    const imageIndex = parseInt(imageMatch[1]) - 1;
                    if (inlineImages[imageIndex]) {
                        return <InlineImageComponent key={index} inlineImage={inlineImages[imageIndex]} />;
                    }
                    return null;
                }
                return <FormattedText key={index} content={part} />;
            })}
        </div>
    );
};

// Компонент для форматированного текста
const FormattedText: React.FC<{ content: string }> = ({ content }) => {
    // Заменяем маркеры форматирования на HTML/JSX элементы
    const formattedContent = content
        // Жирный текст: **текст** или __текст__
        .replace(/\*\*(.*?)\*\*|__(.*?)__/g, '<strong>$1$2</strong>')
        // Курсив: *текст* или _текст_
        .replace(/\*(.*?)\*|_(.*?)_/g, '<em>$1$2</em>')
        // Подчеркнутый: ~~текст~~
        .replace(/~~(.*?)~~/g, '<u>$1</u>')
        // Зачеркнутый: --текст--
        .replace(/--(.*?)--/g, '<s>$1</s>');

    return (
        <div
            className="whitespace-pre-line"
            dangerouslySetInnerHTML={{ __html: formattedContent }}
        />
    );
};


// Компоненты для различных типов вопросов

// Одиночный выбор
const SingleChoiceQuestionComponent: React.FC<{
    question: SingleChoiceQuestion;
    selectedAnswer: number | null;
    onAnswerSelect: (answer: number) => void;
}> = ({ question, selectedAnswer, onAnswerSelect }) => {
    return (
        <div className="space-y-3">
            {question.options.map((option, index) => (
                <button
                    key={index}
                    className={`w-full text-left p-4 rounded-md border transition-all ${selectedAnswer === index
                            ? 'border-amber-600 bg-amber-200 text-amber-900'
                            : 'border-amber-300 hover:border-amber-400 hover:bg-amber-200 text-amber-800'
                        }`}
                    onClick={() => onAnswerSelect(index)}
                >
                    <span className="font-semibold mr-3">
                        {String.fromCharCode(65 + index)}.
                    </span>
                    {option}
                </button>
            ))}
        </div>
    );
};

// Множественный выбор
const MultipleChoiceQuestionComponent: React.FC<{
    question: MultipleChoiceQuestion;
    selectedAnswers: number[];
    onAnswerSelect: (answers: number[]) => void;
}> = ({ question, selectedAnswers, onAnswerSelect }) => {
    const toggleAnswer = (index: number) => {
        const newAnswers = selectedAnswers.includes(index)
            ? selectedAnswers.filter(i => i !== index)
            : [...selectedAnswers, index];
        onAnswerSelect(newAnswers);
    };

    return (
        <div className="space-y-3">
            {question.options.map((option, index) => (
                <button
                    key={index}
                    className={`w-full text-left p-4 rounded-md border transition-all ${selectedAnswers.includes(index)
                            ? 'border-amber-600 bg-amber-200 text-amber-900'
                            : 'border-amber-300 hover:border-amber-400 hover:bg-amber-200 text-amber-800'
                        }`}
                    onClick={() => toggleAnswer(index)}
                >
                    <span className="font-semibold mr-3">
                        {String.fromCharCode(65 + index)}.
                    </span>
                    {option}
                </button>
            ))}
        </div>
    );
};

// Текстовый ответ
const TextAnswerQuestionComponent: React.FC<{
    question: TextAnswerQuestion;
    answer: string;
    onAnswerChange: (answer: string) => void;
}> = ({ question, answer, onAnswerChange }) => {
    return (
        <div className="space-y-3">
            <input
                type="text"
                value={answer}
                onChange={(e) => onAnswerChange(e.target.value)}
                className="w-full p-4 border border-amber-300 rounded-md focus:border-amber-500 focus:ring-1 focus:ring-amber-500"
                placeholder="Введите ваш ответ..."
            />
            {!question.caseSensitive && (
                <p className="text-sm text-amber-600">Регистр букв не учитывается</p>
            )}
        </div>
    );
};

// Соответствие
const MatchingQuestionComponent: React.FC<{
    question: MatchingQuestion;
    matches: { leftId: number; rightId: string }[];
    onMatchesChange: (matches: { leftId: number; rightId: string }[]) => void;
}> = ({ question, matches, onMatchesChange }) => {
    const getMatchForLeft = (leftId: number) => {
        return matches.find(match => match.leftId === leftId)?.rightId || '';
    };

    const handleMatchChange = (leftId: number, rightId: string) => {
        const newMatches = matches.filter(match => match.leftId !== leftId);
        if (rightId) {
            newMatches.push({ leftId, rightId });
        }
        onMatchesChange(newMatches);
    };

    return (
        <div className="space-y-4">
            <div className="grid grid-cols-2 gap-4">
                <div>
                    <h4 className="font-semibold text-amber-900 mb-2">
                        {question.leftTitle || 'Левый столбец'}
                    </h4>
                    <div className="space-y-2">
                        {question.leftColumn.map((item) => (
                            <div key={item.id} className="p-3 bg-amber-100 rounded border border-amber-200">
                                {item.id}. {item.text}
                            </div>
                        ))}
                    </div>
                </div>

                <div>
                    <h4 className="font-semibold text-amber-900 mb-2">
                        {question.rightTitle || 'Правый столбец'}
                    </h4>
                    <div className="space-y-2">
                        {question.rightColumn.map((item) => (
                            <div key={item.id} className="p-3 bg-amber-100 rounded border border-amber-200">
                                {item.id}. {item.text}
                            </div>
                        ))}
                    </div>
                </div>
            </div>

            <div className="space-y-3">
                <h4 className="font-semibold text-amber-900">Установите соответствие:</h4>
                {question.leftColumn.map((leftItem) => (
                    <div key={leftItem.id} className="flex items-center gap-3">
                        <span className="font-medium w-8">{leftItem.id}.</span>
                        <span className="flex-1">{leftItem.text}</span>
                        <select
                            value={getMatchForLeft(leftItem.id)}
                            onChange={(e) => handleMatchChange(leftItem.id, e.target.value)}
                            className="p-2 border border-amber-300 rounded"
                        >
                            <option value="">Выберите...</option>
                            {question.rightColumn.map((rightItem) => (
                                <option key={rightItem.id} value={rightItem.id}>
                                    {rightItem.id}
                                </option>
                            ))}
                        </select>
                    </div>
                ))}
            </div>

            <div className="text-sm text-amber-600">
                Введите ответ в формате: {question.leftColumn.map(item => item.id).join('')} → {question.rightColumn.map(item => item.id).join('')}
            </div>
        </div>
    );
};

// Данные сайта с разными типами вопросов
const sections: Section[] = [
    {
        id: 'ancient',
        title: 'Кубань в древности',
        description: 'История Кубани от каменного века до Античности',
        icon: Building,
        quiz: {
            questions: [
                {
                    id: 'q1',
                    type: 'single',
                    question: 'Сколько тысячелетий просуществовала египетская цивилизация?',
                    options: ['Более одного тысячелетия', 'Более двух тысячелетий', 'Более трех тысячелетий', 'Более четырех тысячелетий'],
                    correctAnswer: 2,  // ЭТО ИНДЕКС!!
                    explanation: 'Древний Египет просуществовал более трех тысячелетий, от додинастического периода до римского завоевания.'
                },
                {
                    id: 'q2',
                    type: 'multiple',
                    question: 'Какие из этих достижений принадлежат древним грекам?',
                    options: ['Демократия', 'Олимпийские игры', 'Римское право', 'Театр', 'Акведуки'],
                    correctAnswers: [0, 1, 3],
                    explanation: 'Древние греки создали демократию, Олимпийские игры и театр. Римское право и акведуки — достижения Древнего Рима.'
                },
                {
                    id: 'q3',
                    type: 'text',
                    question: 'В каком году был основан Рим согласно легенде?',
                    correctAnswer: '753 до н.э.',
                    caseSensitive: false,
                    explanation: 'Согласно римской легенде, Рим был основан Ромулом в 753 году до н.э.'
                },
                {
                    id: 'q4',
                    type: 'matching',
                    question: 'Установите соответствие между древними цивилизациями и их достижениями:',
                    leftColumn: [
                        { id: 1, text: 'Древний Египет' },
                        { id: 2, text: 'Древний Рим' },
                        { id: 3, text: 'Древняя Греция' }
                    ],
                    rightColumn: [
                        { id: 'A', text: 'Пирамиды' },
                        { id: 'B', text: 'Акведуки' },
                        { id: 'C', text: 'Демократия' }
                    ],
                    correctMatches: [
                        { leftId: 1, rightId: 'A' },
                        { leftId: 2, rightId: 'B' },
                        { leftId: 3, rightId: 'C' }
                    ],
                    leftTitle: 'Цивилизации',
                    rightTitle: 'Достижения',
                    explanation: 'Египет известен пирамидами, Рим — акведуками, Греция — демократией.'
                }
            ]
        },
        glossary: [
            { term: 'Фараон', definition: 'Титул правителей Древнего Египта, считавшихся божественными царями' },
            { term: 'Иероглифы', definition: 'Система древнеегипетской письменности, использующая рисуночные знаки' },
            { term: 'Мумификация', definition: 'Процесс бальзамирования тел умерших для сохранения их в загробной жизни' },
            { term: 'Пирамида', definition: 'Монументальная гробница фараонов в форме четырехгранной пирамиды' },
            { term: 'Легион', definition: 'Основная тактическая единица римской армии (3-6 тысяч воинов)' },
            { term: 'Сенат', definition: 'Высший орган государственной власти в Римской республике' },
            { term: 'Полис', definition: 'Древнегреческий город-государство с прилегающими территориями' },
            { term: 'Демократия', definition: 'Форма правления, при которой власть принадлежит народу' },
            { term: 'Философия', definition: 'Учение о наиболее общих принципах бытия и познания' },
            { term: 'Акведук', definition: 'Римское инженерное сооружение для подачи воды в города' }
        ],
        topics: [
            {
                id: 'kubanKamen',
                title: 'Кубань в каменном веке',
                image: '/images/kubanKamenPreview.png',
                inlineImages: [
                    {
                        url: '/images/1 Раздел/1.1/historyPeriods.png',
                        caption: 'Исторические периоды',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/mapCaucas.png',
                        caption: 'Карта заселения Кавказа',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/kubanKamenPreview.png',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/ulskayaStoyanka.png',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/Mamonts.jpg',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/orydyaTruda.png',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/Barbarians.jpg',
                        caption: 'Первобытные люди эпохи мезолита',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/vaza.png',
                        caption: 'Сосуд эпохи неолита',
                        alt: ''
                    },


                ],
                content: `История человечества берет свое начало в каменном веке. Эта древнейшая эпоха человеческой истории является самой продолжительной и делится специалистами на палеолит (древнекаменный век), мезолит (среднекаменный век) и неолит (новокаменный век).

Заселение Северо-Западного Кавказа началось в эпоху древнекаменного века около 500-200 тыс. лет назад. Ученые считают, что Северо-Кавказский путь был одним из путей заселения территории Европы.

[INLINE_IMAGE_1]
На территории Краснодарского края и Республики Адыгея, расположенных на Северо-Западном Кавказе, учеными обнаружено более 50 памятников, относящихся к этому периоду, объединенных в несколько групп: кубанскую, лабинскую, сочинскую, белореченскую и др. 
В древнекаменном веке люди заселяли долины рек Белой, Курджипса, Адагума, Псекупса. Они селились, главным образом, в пещерах. Основными видами деятельности человека в этот период были собирательство и охота. Каменные орудия в регионе изготавливались преимущественно из кремня, сланца и песчаника

[INLINE_IMAGE_2]
Значительный прогресс первобытного общества произошел в завершающий период  древнекаменного века – мустьерскую эпоху (100 тыс. - 35 тыс. лет до н.э.) Археологические памятники этого периода отражают в основном оседлый образ жизни. Люди стали сооружать разнообразные искусственные жилища (хижины и шалаши), появились зачатки религиозных представлений и совершенствовались способы добывания пищи. 
Люди жили родовыми общинами, представляющими замкнутые группы, связанные кровнородственными узами посредствам заключения «браков» внутри общины (эндогамные общины). Совместное проживание людей облегчало добычу пищи, защищало от угроз, обеспечивало обмен знаниями и социальную поддержку сородичей, что повышало возможности их выживания.

[INLINE_IMAGE_3]
На территории Северо-Западного Кавказа обнаружено более 80 памятников мустьерской эпохи. Наибольшая их концентрация обнаруживается в  Прикубанье и Сочинском Причерноморье. Одним из наиболее известных памятников этого периода на Кубани является Ильская стоянка на берегу р. Иль у станицы Ильской. Исследователи относят ее к 50-40 тыс. лет до н.э., что соответствовало периоду максимального обледенения Европы. На Ильской стоянке обнаружены искусственные жилища, Ее обитатели \tбыли искусными охотниками и охотились преимущественно на крупных животных. Находки археологов в районе поселка Ильского позволяют сделать вывод, что здесь было уничтожено около 2400 бизонов.

[INLINE_IMAGE_4]
Второй по значимости отраслью деятельности древнейших людей было собирательство. Оно являлось источником повседневной растительной пищи, которая в рационе древнейших людей занимала значительное место.

В период среднекаменного века – мезолита (10-6 тыс. лет до н.э.)  существенно изменилась природно-географическая среда. Территория Европы почти освободилась от многометровой толщи льда, закончилась ледниковая эпоха. Поменялся ландшафт, растительный и животный мир. Исчезли мамонты, шерстистый носорог и др. животные и физико-географические условия стали близкими современным. Эти сдвиги привели к исчезновению крупных животных ледникового периода, что побудило людей адаптировать свои методы охоты и собирательства к новым условиям. 
[INLINE_IMAGE_5]

На смену коллективной облавной охоте на крупных животных приходит индивидуальная засадная охота на более мелкую дичь.

В эпоху мезолита человек изобрел, что способствовало переходу от коллективной охоты к индивидуальной. В это время он приручил собаку, которая на тысячелетия стала его верным помощником. Важное хозяйственное значение приобрело рыболовство. О развитии рыболовства свидетельствуют гарпуны и рыболовные сети. Наряду с камнем при изготовлении орудий труда широко применялась и кость, например, для наконечников стрел и вкладышевых орудий. 

Гончарное дело почти нигде не практиковалось. Более интенсивным становилось собирательство и складывались предпосылки для возникновения производящего хозяйства. Менялась техника изготовление каменных орудий труда: они мельчали в размерах, широкое распространение получили составные орудия из мелких обработанных камней (микролитов).
[INLINE_IMAGE_6]

Потепление климата в эпоху мезолита произошло и на Северо-Западном Кавказе. Но его природа продолжала значительно отличаться от современной. На месте Таманского полуострова была целая группа островов. Вдоль кубанских рек степь чередовалась с лесом. По Азовскому побережью, где сейчас преобладают лиманы, поросшие камышом, высились деревья теплолюбивых пород (граб, вяз, каштан и др.)

В эпоху мезолита человек заселял не только более благоприятные для обитания предгорные и равнинные районы Кубани, долины рек, но и  обширную горную часть края. Большинство известных мезолитических памятников было выявлено именно в среднегорной части.

Количество известных мезолитических памятников значительно меньше по сравнению с предшествующим периодом. Это связано с их слабой изученностью и трудностью поисков. Особый интерес среди мезолитических памятников представляют Махошкушховские петроглифы (гравировка на камнях), которые состоят из 90 булыжников с различными рисунками. Центральным сюжетом пиктографического искусства, представленного на гальках, является человек.

На основе обобщения имеющихся данных о позднем палеолите и мезолите ученые пришли к выводу о том, что исторический процесс на территории Северного Кавказа характеризовался непрерывностью, автохтонностью и преемственностью. Это, конечно не исключало, более или менее существенных подвижек населения, контактов между представителями разных культур и в результате этого заимствований и диффузий
[INLINE_IMAGE_7]

Завершающий этап каменного века - неолит (новокаменный век) (примерно 6-3 тыс. до н.э.) был ознаменован принципиальными изменениями в жизни древнейшего человека. Он начал заниматься скотоводством и земледелием. В эпоху неолита появились каменные топоры для вырубания деревьев и расчистки участков под посевы и загоны скота. К этому времени человек уже использовал таких домашних животных, как быки, козы, свиньи. Существенный скачок в развитии человечества был связан с появлением металла (вначале меди). Кавказ был древнейшим очагом выплавки меди, а затем и железа. Важным достижением было овладение гончарным делом. Изготовление человеком глиняной посуды стало важнейшим признаком неолитической материальной культуры.

Изменение климатических условий и усовершенствование орудий труда внесли определенные коррективы в ландшафт Кубани. Постепенно ее природно-географический вид стал таким, каким его застали русские поселенцы 17-18 веков. Северная часть Кубани, т.е. правобережье р. Кубани (Прикубанье), представляло собой обширную безлесную равнину – степь. Южная часть, или левобережье Кубани (Закубанье), гористую местность. Река Кубань, делящая край на две почти равные части, является крупнейшей рекой Северного Кавказа. Она берет свое начало на склонах высочайшей горы Кавказа-Эльбруса. До 1871 г. река Кубань по основному руслу несла свои воды в Черное море. Затем, благодаря деятельности человека, она устремилась в Азовское море.

В эпоху неолита существенно изменился выбор места для поселений. Большинство из них представляли собой неукрепленные селища на берегах рек. Лишь некоторые неолитические общины, следуя древним традициям, продолжали жить в пещерах. Жилища представляли собой легкие постройки, сооруженные из плетневого каркаса, обмазанного с обеих сторон глиной. В некоторых районах Северо-Западного Кавказа выявлены останки круглокаменных построек. 

При этом печей в жилищах не обнаружено. Были обнаружены только следы открытых костров. Для хранения запасов продуктов в пол вкапывались большие глиняные сосуды или строились ямы-хранилища. Памятников неолитического времени, датируемых V-IV тыс. до н.э., на территории Кубани немного. Они известны как в Прикубанье (Каменномостская пещера), так и на побережье Черного моря (Нижнешиловская стоянка близ Адлера). Это говорит о расселении первобытных людей по всей территории нашего региона. 

Значительные изменения в технике и формах производства в это время называют «неолитической революцией». Самым важным ее итогом был переход от охоты и собирательства, т.е. присваивающего хозяйства к производящему. Ведущее место в экономике племен Северо-Западного Кавказа заняло земледелие и скотоводство. Последнее в неолите достигло заметных успехов. Скотоводство, а не охота стало основным источником добывания мясной пищи. Костные останки, обнаруженные  в каменомостской пещере, свидетельствуют, что ее обитатели уже разводили крупный и мелкий рогатый скот, свиней и собак. В эпоху неолита часть скота на летние месяцы перегоняли в высокогорье на альпийские луга и там возникали сезонные поселения пастухов. При этом охота продолжала сохранять значительную роль в жизни людей. Основными объектами охоты были олени и дикие козы. Немаловажное место в неолитическом хозяйстве людей занимала обработка кости, шкур и кожи. В ту же пору происходило зарождение ткачества. 

Переходным периодом от неолита к бронзовому веку был энеолит. Его еще называют медным или медно-каменным веком. Он охватывает период от второй половине IV – до начала III тыс. до н.э. Основу экономики энеолитических племен Северо-Западного Кавказа, как и в предыдущую эпоху, составляло земледелие и скотоводство. Посевы производились в поймах рек, у подножий горных склонов. Достаточное количество осадков, наличие естественно поддерживаемого плодородия почв позволяли получать устойчивые урожаи без применения искусственного орошения. Сеяли пшеницу и ячмень, отпечатки которых встречаются на стенках глинных сосудов.

Наибольших успехов в энеолите достигло гончарное дело. Уже производился обжиг изделий в специальных печах. Поверхность посуды в большинстве случаев заглаживалась, горловины сосудов украшались нарезными, штампованными или вдавленными узорами, изредка наносилась роспись красной и коричневой краской по светлому фону.
[INLINE_IMAGE_8]

Отличительной особенностью энеолитической эпохи было использование металлов. Уровень развития домашних производств, в особенности керамического; существование гончарных печей, в которых достигалась температура, достаточная и для плавки меди; а также наличие в регионе месторождений самородной меди и вторичных или окисленных руд, позволяет сделать вывод о том, что необходимые для перехода к металлургии производственные и сырьевые возможности были здесь достигнуты еще в энеолите.

Основной социальной ячейкой людей эпохи энеолита являлась родовая община, состоявшая из парных семей. Развитие скотоводства, приносившего прибавочный продукт, а вместе с ним борьбу за плодородные пастбища, приводили к обострению отношений между племенами и созданию укрепленных поселений, обнесенных оборонительными стенами.

Именно в энеолите на Северо-Западном Кавказе сложились предпосылки для возникновения высокоразвитых культур Прикубанья в эпоху бронзы – Майкопской и Дольменной.

`
            },
            {
                id: 'bronzeCulture',
                title: 'Культуры эпохи бронзы',
                image: '/images/1 Раздел/1.2/Ravshans.png',
                inlineImages: [
                    {
                        url: '/images/1 Раздел/1.2/culture.png',
                        caption: 'Ареал распространения  Майкопской культуры',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/dolmen.png',
                        caption: 'Дольмен',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/animalsFigures.png',
                        caption: 'Фигурки животных из Майкопского кургана',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/bronzeKnife.png',
                        caption: 'Бронзовые ножи',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/goldBull.png',
                        caption: 'Золотой бычок. Майкопской культура.',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/Ravshans.png',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/manyDolmens.png',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/MonolithDolmen.jpg',
                        caption: 'Дольмен монолит',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/plitochDolmen.png',
                        caption: 'Плиточный дольмен',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/bulav.png',
                        caption: '',
                        alt: ''
                    },

                ],
                content: `Бронзовый век завершает каменный век и предшествует железному. Он был связан с улучшением обработки таких металлов как медь и олово и получением из них более прочного металла - бронзы. Использование бронзы способствовало повышению производительности труда и появлению новых видов хозяйственной деятельности. 

Бронзовый век на Северо-Западном Кавказе делится на три периода. Первый - ранняя бронза (вторая половина III тыс. до н. э.) - время бурного расцвета всемирно известной и знаменитой майкопской археологической культуры и начала становления дольменной культуры.
[INLINE_IMAGE_1]
Второй - средняя бронза (II тыс. до н.э.) - период активного прогресса культуры строителей дольменов и параллельной ей северокавказской культуры.
[INLINE_IMAGE_2]
Третий - поздняя бронза (рубеж II-I тыс. до и. э.) - эпоха развития металлургического центра, представленного прикубанской культурой.

В период ранней бронзы с середины III тысячелетия до н.э. северо-западную и центральную часть Северного Кавказа заселяли племена майкопской культуры. Майкопская культура раскинулась на обширном пространстве от Тамани до Дагестана, но сердцем ее являлось Прикубанье. Метрополия майкопской культуры находилась в районе кургана Ошад в Закубанье. Эта культура является первой цивилизацией не только на Северном Кавказе, но и на всей территории России. Она была открыта в 1897 г. археологом Н. И. Веселовским, исследовавшим в районе г. Майкопа (современная Республика Адыгея) курган «Ошад». Местообнаружение кургана впоследствии дало название знаменитой майкопской культуре. Под 11-метровой толщей Майкопского кургана была открыта четырехугольная погребальная камера с многочисленными уникальными золотыми украшениями, состоящими из 68 штампованных фигурок львов, 19 фигурок быков, 38 колец, серег, золотых и серебряных бляшек и множества бус. 
[INLINE_IMAGE_3]
Кроме того, в кургане обнаружены серебряные кувшины с чеканными рисунками, изображающими животных и горный пейзаж, обилие глиняных сосудов, бронзовые топоры, ножи и т.п. Майкопский курган и по сей день является уникальным по грандиозным масштабам курганной насыпи, богатству и художественной ценности погребального инвентаря. Всего археологами открыто около 200 памятников этой культуры.

На майкопских поселениях обнаружены останки жилищ, очаги и хозяйственные ямы. Основу экономики майкопских племен составляло скотоводство. Они разводили все виды современных домашних животных: корову, овцу, свинью. Майкопцы начали использовать лошадь для верховой езды. 

Отгонное скотоводство обеспечивало майкопские племена не только мясом, но и шерстью. В результате у них развивается прядение, а возможно, и примитивное ткачество. Находки пряслиц на поселениях, а также остатки холщевых и шерстяных одежд, обрывков льняной ткани убеждают, что представители майкопской культуры достигли больших успехов в производстве тканей. 

Начиная с эпохи ранней бронзы Северный Кавказ постепенно превращается в один из крупных центров металлопроизводства Старого Света. Бронзовые и медные котлы, ножи-кинжалы, топоры-тесла, конские псалии изготавливались майкопскими ремесленниками преимущественно из местного сырья.
[INLINE_IMAGE_4]
Больших высот у представителей майкопской культуры достигло гончарное дело, ставшее в ранней бронзе отдельной отраслью производства. Широко использовался ими гончарный круг, на котором местные мастера производили горшки, кувшины, миски и прочую посуду.

Племена майкопской культуры оказали большое влияние на историческое развитие многих племен бронзового века Азово-Черноморского региона, распространив среди них колесо, торевтику, сложную социальную структуру и т.п. 

Археологические данные позволяют сделать вывод о том, что майкопские племена были патриархальными. В результате социального расслоения у них сформировалось три социальные группы населения: богатая родовая знать, рядовые общинники и зависимое население. Окрепшая родоплеменная верхушка майкопских племен стремилась укрепить свои экономические привилегии путем захвата чужих богатств, что резко увеличивало число межплеменных столкновений. В этой связи майкопские племена стали расселяться в труднодоступных, удобных для обороны местах. Их поселения ограждались мощными каменными стенами (Мешоко, Ясенева Поляна). Постоянные войны обогащали вождей, а захват пленных приводил к возникновению рабства. 
[INLINE_IMAGE_5]
Погребальные обряды майкопцев свидетельствуют о вере в загробную жизнь. В могилу покойника клали все, что могло ему пригодиться, и чем он пользовался до смерти. Красной краске, которой посыпались могилы, придавалось значение очистительной силы огня. По погребальным сооружениям отчетливо прослеживается глубина социального расслоение у племен майкопской культуры. Если погребения рядовых общинников выглядели в виде небольших курганов с относительно бедным погребальным инвентарем, то погребения племенных вождей представляли из себя огромные насыпи с монументальными погребальными камерами. В иной мир их сопровождали не только роскошный инвентарь, но и преднамеренно убитые подданные.  

Майкопские племена поддерживали связи с другими народами древнего мира – Передней, Малой Азией и даже Месопотамией. Однако в основном они формировалась и развивалась на местной основе. Ареал распространения племен майкопской культуры – это в точности территория синдо-меотов в период античности, зихов в раннем средневековье и адыгов (черкесов) в новое время.

Майкопская культура не распространялась на горные районы края. Там с середины III до конца II тысячелетия (на Западном Кавказе) от Таманского полуострова до Абхазии существовала дольменная культура. Свое название она получила по сохранившимся в большом количестве каменным гробницам – дольменам.
[INLINE_IMAGE_6]
Строители дольменов жили по соседству с племенами майкопской культуры. Дольмены (от брет. taolmaen - каменный стол) - древние погребальные и культовые сооружения, относящиеся к категории мегалитических памятников, состоящие из нескольких плит. У адыгов и абхазов они известны под названием «испун», «спыун» («дома карликов», «пещеры»), а также «кеунеж», «адамра» («древние могильные дома»).
[INLINE_IMAGE_7]
На Северо-Западном Кавказе известно несколько типов дольменных построек: плиточные, составные, корытообразные и дольмены-монолиты. Наибольшее распространение получили плиточные (или обыкновенные) дольмены. Они сложены из пяти плит - четырех вертикальных и одной горизонтальной в виде крыши. Встречаются также и дольмены-монолиты, целиком высеченные в скале. Размеры этих удивительных памятников колеблются в пределах 0,7 - 2,4 м. Обязательным является наличие в передней стене отверстия прямоугольной или круглой формы, которое закрывалось каменной пробкой. Стены дольменов покрыты зигзагообразными узорами. 

Древние дольмены содержали от одного до трех покойников, положенных скорченно и густо засыпанных красной охрой. Это были захоронения родовой знати. В эпоху расцвета дольменной культуры в первой половине II тысячелетия стали появляться массовые захоронения в позе сидя. К этому времени относятся большие скопления дольменов «поляны», представлявшие собой племенные кладбища с сотнями погребальных сооружений у станиц Даховской, Новосвободной, Баговской и поселка Каменомостского. Так, на р.  Кизинке (близ станицы Баговской) обнаружено 564 дольмена, в районе станицы Каменномостской - 260-270 экземпляров. Общее количество описанных на Северо-Западном Кавказе дольменов достигает 2200 построек. В целом культура дольменов обычно связывается с древнейшим адыго-абхазским этносом.

[INLINE_IMAGE_8]
Племена дольменной культуры занимались земледелием, скотоводством, а в приморской полосе – морским промыслом. Они прекрасно владели мастерством обработки камня, металла; умели лепить прочную глиняную посуду, украшенную орнаментом.

Время возникновения дольменов было временем возникновения имущественного неравенства. Род продолжал оставаться основной общественной организацией представителей дольменной культуры. В тоже время происходило разделение между отдельными семьями когда-то коллективного хозяйства.
[INLINE_IMAGE_9]
У племен дольменной культуры существовали активные контакты с представителями майкопской культуры. О взаимовлияниях и частичном смешении обеих культур свидетельствуют мегалитические сооружения из курганов ст. Новосвободной, являющиеся подражанием «майкопцев» «дольменщикам»

В эпоху средней бронзы развилась северокавказская археологическая культура (2000 - 1000 гг. до н.э.), генетически связанная с майкопской культурой и следующая за ней по времени бытования. Ее следы в виде бытовых и погребальных комплексов находят на значительной территории Северного Кавказа. Курганы данной культуры встречаются как в степной правобережной части Кубани (в Брюховецком, Кавказском районах и др.), так и в Закубанье (районы аула Уляп, Хатукай, станиц Клермесской, Ново-Лабинской и др.) Погребения северокавказской культуры известны как в виде насыпи, так и в грунтовых могилах. Количество предметов, захороненных с покойником, было незначительно.

Сравнение уровня социально-экономического развития носителей северокавказской культуры со связанной и предшествующей ей майкопской культурой позволяет сделать вывод о том, что в послемайкопское время процесс социально-экономического развития местного общества несколько затормозился. Представители северокавказской культуры не воздвигали богатых курганов, подобных майкопским. В материальных останках северокавказской культуры не столь отчетливо прослеживалась социальная дифференциация.
[INLINE_IMAGE_10]
Племена северокавказской культуры вели оседлый образ жизни. Основу хозяйства представителей северокавказской культуры составляли скотоводство и земледелие. Стада состояли из лошадей, мелкого и крупного рогатого скота. Следует отметить, что лошадь, как и у представителей майкопской культуры, использовалась для верховой езды. Северокавказцы возделывали пшеницу и ячмень. Земля обрабатывалась мотыгой, а урожай собирался серпом. Важнейшими занятиями племен северокавказской культуры были металлургия и металлообработка. 

Таким образом, на протяжении всего бронзового века на Северо-Западном Кавказе происходили сложные процессы развития племен и культур. Здесь был сформирован один из центров металлургии бронзы, получили широкое развитие земледелие, скотоводство и гончарное дело. 
`
            },
            {
                id: 'greece',
                title: 'Древняя Греция',
                image: '/images/ancient-greece.jpeg',
                inlineImages: [
                    {
                        url: '/images/greek-theater.jpeg',
                        caption: 'Древнегреческий амфитеатр — место рождения театрального искусства и демократических собраний',
                        alt: 'Древнегреческий амфитеатр'
                    },
                    {
                        url: '/images/greek-philosophy.jpeg',
                        caption: 'Древнегреческие философы — основатели западной философской традиции',
                        alt: 'Древнегреческие философы'
                    }
                ],
                content: `Древняя Греция — античная греческая цивилизация на юго-востоке Европы, существовавшая с III тысячелетия до н. э. до VI века н. э.

Основные периоды:
• Архаический период (VIII-VI вв. до н.э.)
• Классический период (V-IV вв. до н.э.)
• Эллинистический период (IV-I вв. до н.э.)

[INLINE_IMAGE_1]

Вклад в мировую цивилизацию:
• Демократия (афинская демократия) — основа современного народовластия
• Философия (Сократ, Платон, Аристотель) — фундамент западной мысли

[INLINE_IMAGE_2]

• Театр (трагедия и комедия) — искусство драмы
• Олимпийские игры — спортивные состязания
• Математика и геометрия (Евклид, Пифагор)
• История как наука (Геродот, Фукидид)

Греческие полисы-государства создали уникальную систему самоуправления и заложили основы западной цивилизации. Наследие Древней Греции живет в современной науке, искусстве и политике.`
            }
        ]
    },
    {
        id: 'ancientdd',
        title: 'Кубань в древности',
        description: 'История Кубани от каменного века до Античности',
        icon: Building,
        quiz: {
            questions: [
                {
                    id: 'q1',
                    type: 'single',
                    question: 'Сколько тысячелетий просуществовала египетская цивилизация?',
                    options: ['Более одного тысячелетия', 'Более двух тысячелетий', 'Более трех тысячелетий', 'Более четырех тысячелетий'],
                    correctAnswer: 2,
                    explanation: 'Древний Египет просуществовал более трех тысячелетий, от додинастического периода до римского завоевания.'
                },
                {
                    id: 'q2',
                    type: 'multiple',
                    question: 'Какие из этих достижений принадлежат древним грекам?',
                    options: ['Демократия', 'Олимпийские игры', 'Римское право', 'Театр', 'Акведуки'],
                    correctAnswers: [0, 1, 3],
                    explanation: 'Древние греки создали демократию, Олимпийские игры и театр. Римское право и акведуки — достижения Древнего Рима.'
                },
                {
                    id: 'q3',
                    type: 'text',
                    question: 'В каком году был основан Рим согласно легенде?',
                    correctAnswer: '753 до н.э.',
                    caseSensitive: false,
                    explanation: 'Согласно римской легенде, Рим был основан Ромулом в 753 году до н.э.'
                },
                {
                    id: 'q4',
                    type: 'matching',
                    question: 'Установите соответствие между древними цивилизациями и их достижениями:',
                    leftColumn: [
                        { id: 1, text: 'Древний Египет' },
                        { id: 2, text: 'Древний Рим' },
                        { id: 3, text: 'Древняя Греция' }
                    ],
                    rightColumn: [
                        { id: 'A', text: 'Пирамиды' },
                        { id: 'B', text: 'Акведуки' },
                        { id: 'C', text: 'Демократия' }
                    ],
                    correctMatches: [
                        { leftId: 1, rightId: 'A' },
                        { leftId: 2, rightId: 'B' },
                        { leftId: 3, rightId: 'C' }
                    ],
                    leftTitle: 'Цивилизации',
                    rightTitle: 'Достижения',
                    explanation: 'Египет известен пирамидами, Рим — акведуками, Греция — демократией.'
                }
            ]
        },
        glossary: [
            { term: 'Фараон', definition: 'Титул правителей Древнего Египта, считавшихся божественными царями' },
            { term: 'Иероглифы', definition: 'Система древнеегипетской письменности, использующая рисуночные знаки' },
            { term: 'Мумификация', definition: 'Процесс бальзамирования тел умерших для сохранения их в загробной жизни' },
            { term: 'Пирамида', definition: 'Монументальная гробница фараонов в форме четырехгранной пирамиды' },
            { term: 'Легион', definition: 'Основная тактическая единица римской армии (3-6 тысяч воинов)' },
            { term: 'Сенат', definition: 'Высший орган государственной власти в Римской республике' },
            { term: 'Полис', definition: 'Древнегреческий город-государство с прилегающими территориями' },
            { term: 'Демократия', definition: 'Форма правления, при которой власть принадлежит народу' },
            { term: 'Философия', definition: 'Учение о наиболее общих принципах бытия и познания' },
            { term: 'Акведук', definition: 'Римское инженерное сооружение для подачи воды в города' }
        ],
        topics: [
            {
                id: 'kubanKamen',
                title: 'Кубань в каменном веке',
                image: '/images/kubanKamenPreview.png',
                inlineImages: [
                    {
                        url: '/images/1 Раздел/1.1/historyPeriods.png',
                        caption: 'Исторические периоды',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/mapCaucas.png',
                        caption: 'Карта заселения Кавказа',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/kubanKamenPreview.png',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/ulskayaStoyanka.png',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/Mamonts.jpg',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/orydyaTruda.png',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/Barbarians.jpg',
                        caption: 'Первобытные люди эпохи мезолита',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.1/vaza.png',
                        caption: 'Сосуд эпохи неолита',
                        alt: ''
                    },


                ],
                content: `История человечества берет свое начало в каменном веке. Эта древнейшая эпоха человеческой истории является самой продолжительной и делится специалистами на палеолит (древнекаменный век), мезолит (среднекаменный век) и неолит (новокаменный век).

Заселение Северо-Западного Кавказа началось в эпоху древнекаменного века около 500-200 тыс. лет назад. Ученые считают, что Северо-Кавказский путь был одним из путей заселения территории Европы.

[INLINE_IMAGE_1]
На территории Краснодарского края и Республики Адыгея, расположенных на Северо-Западном Кавказе, учеными обнаружено более 50 памятников, относящихся к этому периоду, объединенных в несколько групп: кубанскую, лабинскую, сочинскую, белореченскую и др. 
В древнекаменном веке люди заселяли долины рек Белой, Курджипса, Адагума, Псекупса. Они селились, главным образом, в пещерах. Основными видами деятельности человека в этот период были собирательство и охота. Каменные орудия в регионе изготавливались преимущественно из кремня, сланца и песчаника

[INLINE_IMAGE_2]
Значительный прогресс первобытного общества произошел в завершающий период  древнекаменного века – мустьерскую эпоху (100 тыс. - 35 тыс. лет до н.э.) Археологические памятники этого периода отражают в основном оседлый образ жизни. Люди стали сооружать разнообразные искусственные жилища (хижины и шалаши), появились зачатки религиозных представлений и совершенствовались способы добывания пищи. 
Люди жили родовыми общинами, представляющими замкнутые группы, связанные кровнородственными узами посредствам заключения «браков» внутри общины (эндогамные общины). Совместное проживание людей облегчало добычу пищи, защищало от угроз, обеспечивало обмен знаниями и социальную поддержку сородичей, что повышало возможности их выживания.

[INLINE_IMAGE_3]
На территории Северо-Западного Кавказа обнаружено более 80 памятников мустьерской эпохи. Наибольшая их концентрация обнаруживается в  Прикубанье и Сочинском Причерноморье. Одним из наиболее известных памятников этого периода на Кубани является Ильская стоянка на берегу р. Иль у станицы Ильской. Исследователи относят ее к 50-40 тыс. лет до н.э., что соответствовало периоду максимального обледенения Европы. На Ильской стоянке обнаружены искусственные жилища, Ее обитатели \tбыли искусными охотниками и охотились преимущественно на крупных животных. Находки археологов в районе поселка Ильского позволяют сделать вывод, что здесь было уничтожено около 2400 бизонов.

[INLINE_IMAGE_4]
Второй по значимости отраслью деятельности древнейших людей было собирательство. Оно являлось источником повседневной растительной пищи, которая в рационе древнейших людей занимала значительное место.

В период среднекаменного века – мезолита (10-6 тыс. лет до н.э.)  существенно изменилась природно-географическая среда. Территория Европы почти освободилась от многометровой толщи льда, закончилась ледниковая эпоха. Поменялся ландшафт, растительный и животный мир. Исчезли мамонты, шерстистый носорог и др. животные и физико-географические условия стали близкими современным. Эти сдвиги привели к исчезновению крупных животных ледникового периода, что побудило людей адаптировать свои методы охоты и собирательства к новым условиям. 
[INLINE_IMAGE_5]

На смену коллективной облавной охоте на крупных животных приходит индивидуальная засадная охота на более мелкую дичь.

В эпоху мезолита человек изобрел, что способствовало переходу от коллективной охоты к индивидуальной. В это время он приручил собаку, которая на тысячелетия стала его верным помощником. Важное хозяйственное значение приобрело рыболовство. О развитии рыболовства свидетельствуют гарпуны и рыболовные сети. Наряду с камнем при изготовлении орудий труда широко применялась и кость, например, для наконечников стрел и вкладышевых орудий. 

Гончарное дело почти нигде не практиковалось. Более интенсивным становилось собирательство и складывались предпосылки для возникновения производящего хозяйства. Менялась техника изготовление каменных орудий труда: они мельчали в размерах, широкое распространение получили составные орудия из мелких обработанных камней (микролитов).
[INLINE_IMAGE_6]

Потепление климата в эпоху мезолита произошло и на Северо-Западном Кавказе. Но его природа продолжала значительно отличаться от современной. На месте Таманского полуострова была целая группа островов. Вдоль кубанских рек степь чередовалась с лесом. По Азовскому побережью, где сейчас преобладают лиманы, поросшие камышом, высились деревья теплолюбивых пород (граб, вяз, каштан и др.)

В эпоху мезолита человек заселял не только более благоприятные для обитания предгорные и равнинные районы Кубани, долины рек, но и  обширную горную часть края. Большинство известных мезолитических памятников было выявлено именно в среднегорной части.

Количество известных мезолитических памятников значительно меньше по сравнению с предшествующим периодом. Это связано с их слабой изученностью и трудностью поисков. Особый интерес среди мезолитических памятников представляют Махошкушховские петроглифы (гравировка на камнях), которые состоят из 90 булыжников с различными рисунками. Центральным сюжетом пиктографического искусства, представленного на гальках, является человек.

На основе обобщения имеющихся данных о позднем палеолите и мезолите ученые пришли к выводу о том, что исторический процесс на территории Северного Кавказа характеризовался непрерывностью, автохтонностью и преемственностью. Это, конечно не исключало, более или менее существенных подвижек населения, контактов между представителями разных культур и в результате этого заимствований и диффузий
[INLINE_IMAGE_7]

Завершающий этап каменного века - неолит (новокаменный век) (примерно 6-3 тыс. до н.э.) был ознаменован принципиальными изменениями в жизни древнейшего человека. Он начал заниматься скотоводством и земледелием. В эпоху неолита появились каменные топоры для вырубания деревьев и расчистки участков под посевы и загоны скота. К этому времени человек уже использовал таких домашних животных, как быки, козы, свиньи. Существенный скачок в развитии человечества был связан с появлением металла (вначале меди). Кавказ был древнейшим очагом выплавки меди, а затем и железа. Важным достижением было овладение гончарным делом. Изготовление человеком глиняной посуды стало важнейшим признаком неолитической материальной культуры.

Изменение климатических условий и усовершенствование орудий труда внесли определенные коррективы в ландшафт Кубани. Постепенно ее природно-географический вид стал таким, каким его застали русские поселенцы 17-18 веков. Северная часть Кубани, т.е. правобережье р. Кубани (Прикубанье), представляло собой обширную безлесную равнину – степь. Южная часть, или левобережье Кубани (Закубанье), гористую местность. Река Кубань, делящая край на две почти равные части, является крупнейшей рекой Северного Кавказа. Она берет свое начало на склонах высочайшей горы Кавказа-Эльбруса. До 1871 г. река Кубань по основному руслу несла свои воды в Черное море. Затем, благодаря деятельности человека, она устремилась в Азовское море.

В эпоху неолита существенно изменился выбор места для поселений. Большинство из них представляли собой неукрепленные селища на берегах рек. Лишь некоторые неолитические общины, следуя древним традициям, продолжали жить в пещерах. Жилища представляли собой легкие постройки, сооруженные из плетневого каркаса, обмазанного с обеих сторон глиной. В некоторых районах Северо-Западного Кавказа выявлены останки круглокаменных построек. 

При этом печей в жилищах не обнаружено. Были обнаружены только следы открытых костров. Для хранения запасов продуктов в пол вкапывались большие глиняные сосуды или строились ямы-хранилища. Памятников неолитического времени, датируемых V-IV тыс. до н.э., на территории Кубани немного. Они известны как в Прикубанье (Каменномостская пещера), так и на побережье Черного моря (Нижнешиловская стоянка близ Адлера). Это говорит о расселении первобытных людей по всей территории нашего региона. 

Значительные изменения в технике и формах производства в это время называют «неолитической революцией». Самым важным ее итогом был переход от охоты и собирательства, т.е. присваивающего хозяйства к производящему. Ведущее место в экономике племен Северо-Западного Кавказа заняло земледелие и скотоводство. Последнее в неолите достигло заметных успехов. Скотоводство, а не охота стало основным источником добывания мясной пищи. Костные останки, обнаруженные  в каменомостской пещере, свидетельствуют, что ее обитатели уже разводили крупный и мелкий рогатый скот, свиней и собак. В эпоху неолита часть скота на летние месяцы перегоняли в высокогорье на альпийские луга и там возникали сезонные поселения пастухов. При этом охота продолжала сохранять значительную роль в жизни людей. Основными объектами охоты были олени и дикие козы. Немаловажное место в неолитическом хозяйстве людей занимала обработка кости, шкур и кожи. В ту же пору происходило зарождение ткачества. 

Переходным периодом от неолита к бронзовому веку был энеолит. Его еще называют медным или медно-каменным веком. Он охватывает период от второй половине IV – до начала III тыс. до н.э. Основу экономики энеолитических племен Северо-Западного Кавказа, как и в предыдущую эпоху, составляло земледелие и скотоводство. Посевы производились в поймах рек, у подножий горных склонов. Достаточное количество осадков, наличие естественно поддерживаемого плодородия почв позволяли получать устойчивые урожаи без применения искусственного орошения. Сеяли пшеницу и ячмень, отпечатки которых встречаются на стенках глинных сосудов.

Наибольших успехов в энеолите достигло гончарное дело. Уже производился обжиг изделий в специальных печах. Поверхность посуды в большинстве случаев заглаживалась, горловины сосудов украшались нарезными, штампованными или вдавленными узорами, изредка наносилась роспись красной и коричневой краской по светлому фону.
[INLINE_IMAGE_8]

Отличительной особенностью энеолитической эпохи было использование металлов. Уровень развития домашних производств, в особенности керамического; существование гончарных печей, в которых достигалась температура, достаточная и для плавки меди; а также наличие в регионе месторождений самородной меди и вторичных или окисленных руд, позволяет сделать вывод о том, что необходимые для перехода к металлургии производственные и сырьевые возможности были здесь достигнуты еще в энеолите.

Основной социальной ячейкой людей эпохи энеолита являлась родовая община, состоявшая из парных семей. Развитие скотоводства, приносившего прибавочный продукт, а вместе с ним борьбу за плодородные пастбища, приводили к обострению отношений между племенами и созданию укрепленных поселений, обнесенных оборонительными стенами.

Именно в энеолите на Северо-Западном Кавказе сложились предпосылки для возникновения высокоразвитых культур Прикубанья в эпоху бронзы – Майкопской и Дольменной.

`
            },
            {
                id: 'bronzeCulture',
                title: 'Культуры эпохи бронзы',
                image: '/images/1 Раздел/1.2/Ravshans.png',
                inlineImages: [
                    {
                        url: '/images/1 Раздел/1.2/culture.png',
                        caption: 'Ареал распространения  Майкопской культуры',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/dolmen.png',
                        caption: 'Дольмен',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/animalsFigures.png',
                        caption: 'Фигурки животных из Майкопского кургана',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/bronzeKnife.png',
                        caption: 'Бронзовые ножи',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/goldBull.png',
                        caption: 'Золотой бычок. Майкопской культура.',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/Ravshans.png',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/manyDolmens.png',
                        caption: '',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/MonolithDolmen.jpg',
                        caption: 'Дольмен монолит',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/plitochDolmen.png',
                        caption: 'Плиточный дольмен',
                        alt: ''
                    },
                    {
                        url: '/images/1 Раздел/1.2/bulav.png',
                        caption: '',
                        alt: ''
                    },

                ],
                content: `Бронзовый век завершает каменный век и предшествует железному. Он был связан с улучшением обработки таких металлов как медь и олово и получением из них более прочного металла - бронзы. Использование бронзы способствовало повышению производительности труда и появлению новых видов хозяйственной деятельности. 

Бронзовый век на Северо-Западном Кавказе делится на три периода. Первый - ранняя бронза (вторая половина III тыс. до н. э.) - время бурного расцвета всемирно известной и знаменитой майкопской археологической культуры и начала становления дольменной культуры.
[INLINE_IMAGE_1]
Второй - средняя бронза (II тыс. до н.э.) - период активного прогресса культуры строителей дольменов и параллельной ей северокавказской культуры.
[INLINE_IMAGE_2]
Третий - поздняя бронза (рубеж II-I тыс. до и. э.) - эпоха развития металлургического центра, представленного прикубанской культурой.

В период ранней бронзы с середины III тысячелетия до н.э. северо-западную и центральную часть Северного Кавказа заселяли племена майкопской культуры. Майкопская культура раскинулась на обширном пространстве от Тамани до Дагестана, но сердцем ее являлось Прикубанье. Метрополия майкопской культуры находилась в районе кургана Ошад в Закубанье. Эта культура является первой цивилизацией не только на Северном Кавказе, но и на всей территории России. Она была открыта в 1897 г. археологом Н. И. Веселовским, исследовавшим в районе г. Майкопа (современная Республика Адыгея) курган «Ошад». Местообнаружение кургана впоследствии дало название знаменитой майкопской культуре. Под 11-метровой толщей Майкопского кургана была открыта четырехугольная погребальная камера с многочисленными уникальными золотыми украшениями, состоящими из 68 штампованных фигурок львов, 19 фигурок быков, 38 колец, серег, золотых и серебряных бляшек и множества бус. 
[INLINE_IMAGE_3]
Кроме того, в кургане обнаружены серебряные кувшины с чеканными рисунками, изображающими животных и горный пейзаж, обилие глиняных сосудов, бронзовые топоры, ножи и т.п. Майкопский курган и по сей день является уникальным по грандиозным масштабам курганной насыпи, богатству и художественной ценности погребального инвентаря. Всего археологами открыто около 200 памятников этой культуры.

На майкопских поселениях обнаружены останки жилищ, очаги и хозяйственные ямы. Основу экономики майкопских племен составляло скотоводство. Они разводили все виды современных домашних животных: корову, овцу, свинью. Майкопцы начали использовать лошадь для верховой езды. 

Отгонное скотоводство обеспечивало майкопские племена не только мясом, но и шерстью. В результате у них развивается прядение, а возможно, и примитивное ткачество. Находки пряслиц на поселениях, а также остатки холщевых и шерстяных одежд, обрывков льняной ткани убеждают, что представители майкопской культуры достигли больших успехов в производстве тканей. 

Начиная с эпохи ранней бронзы Северный Кавказ постепенно превращается в один из крупных центров металлопроизводства Старого Света. Бронзовые и медные котлы, ножи-кинжалы, топоры-тесла, конские псалии изготавливались майкопскими ремесленниками преимущественно из местного сырья.
[INLINE_IMAGE_4]
Больших высот у представителей майкопской культуры достигло гончарное дело, ставшее в ранней бронзе отдельной отраслью производства. Широко использовался ими гончарный круг, на котором местные мастера производили горшки, кувшины, миски и прочую посуду.

Племена майкопской культуры оказали большое влияние на историческое развитие многих племен бронзового века Азово-Черноморского региона, распространив среди них колесо, торевтику, сложную социальную структуру и т.п. 

Археологические данные позволяют сделать вывод о том, что майкопские племена были патриархальными. В результате социального расслоения у них сформировалось три социальные группы населения: богатая родовая знать, рядовые общинники и зависимое население. Окрепшая родоплеменная верхушка майкопских племен стремилась укрепить свои экономические привилегии путем захвата чужих богатств, что резко увеличивало число межплеменных столкновений. В этой связи майкопские племена стали расселяться в труднодоступных, удобных для обороны местах. Их поселения ограждались мощными каменными стенами (Мешоко, Ясенева Поляна). Постоянные войны обогащали вождей, а захват пленных приводил к возникновению рабства. 
[INLINE_IMAGE_5]
Погребальные обряды майкопцев свидетельствуют о вере в загробную жизнь. В могилу покойника клали все, что могло ему пригодиться, и чем он пользовался до смерти. Красной краске, которой посыпались могилы, придавалось значение очистительной силы огня. По погребальным сооружениям отчетливо прослеживается глубина социального расслоение у племен майкопской культуры. Если погребения рядовых общинников выглядели в виде небольших курганов с относительно бедным погребальным инвентарем, то погребения племенных вождей представляли из себя огромные насыпи с монументальными погребальными камерами. В иной мир их сопровождали не только роскошный инвентарь, но и преднамеренно убитые подданные.  

Майкопские племена поддерживали связи с другими народами древнего мира – Передней, Малой Азией и даже Месопотамией. Однако в основном они формировалась и развивалась на местной основе. Ареал распространения племен майкопской культуры – это в точности территория синдо-меотов в период античности, зихов в раннем средневековье и адыгов (черкесов) в новое время.

Майкопская культура не распространялась на горные районы края. Там с середины III до конца II тысячелетия (на Западном Кавказе) от Таманского полуострова до Абхазии существовала дольменная культура. Свое название она получила по сохранившимся в большом количестве каменным гробницам – дольменам.
[INLINE_IMAGE_6]
Строители дольменов жили по соседству с племенами майкопской культуры. Дольмены (от брет. taolmaen - каменный стол) - древние погребальные и культовые сооружения, относящиеся к категории мегалитических памятников, состоящие из нескольких плит. У адыгов и абхазов они известны под названием «испун», «спыун» («дома карликов», «пещеры»), а также «кеунеж», «адамра» («древние могильные дома»).
[INLINE_IMAGE_7]
На Северо-Западном Кавказе известно несколько типов дольменных построек: плиточные, составные, корытообразные и дольмены-монолиты. Наибольшее распространение получили плиточные (или обыкновенные) дольмены. Они сложены из пяти плит - четырех вертикальных и одной горизонтальной в виде крыши. Встречаются также и дольмены-монолиты, целиком высеченные в скале. Размеры этих удивительных памятников колеблются в пределах 0,7 - 2,4 м. Обязательным является наличие в передней стене отверстия прямоугольной или круглой формы, которое закрывалось каменной пробкой. Стены дольменов покрыты зигзагообразными узорами. 

Древние дольмены содержали от одного до трех покойников, положенных скорченно и густо засыпанных красной охрой. Это были захоронения родовой знати. В эпоху расцвета дольменной культуры в первой половине II тысячелетия стали появляться массовые захоронения в позе сидя. К этому времени относятся большие скопления дольменов «поляны», представлявшие собой племенные кладбища с сотнями погребальных сооружений у станиц Даховской, Новосвободной, Баговской и поселка Каменомостского. Так, на р.  Кизинке (близ станицы Баговской) обнаружено 564 дольмена, в районе станицы Каменномостской - 260-270 экземпляров. Общее количество описанных на Северо-Западном Кавказе дольменов достигает 2200 построек. В целом культура дольменов обычно связывается с древнейшим адыго-абхазским этносом.

[INLINE_IMAGE_8]
Племена дольменной культуры занимались земледелием, скотоводством, а в приморской полосе – морским промыслом. Они прекрасно владели мастерством обработки камня, металла; умели лепить прочную глиняную посуду, украшенную орнаментом.

Время возникновения дольменов было временем возникновения имущественного неравенства. Род продолжал оставаться основной общественной организацией представителей дольменной культуры. В тоже время происходило разделение между отдельными семьями когда-то коллективного хозяйства.
[INLINE_IMAGE_9]
У племен дольменной культуры существовали активные контакты с представителями майкопской культуры. О взаимовлияниях и частичном смешении обеих культур свидетельствуют мегалитические сооружения из курганов ст. Новосвободной, являющиеся подражанием «майкопцев» «дольменщикам»

В эпоху средней бронзы развилась северокавказская археологическая культура (2000 - 1000 гг. до н.э.), генетически связанная с майкопской культурой и следующая за ней по времени бытования. Ее следы в виде бытовых и погребальных комплексов находят на значительной территории Северного Кавказа. Курганы данной культуры встречаются как в степной правобережной части Кубани (в Брюховецком, Кавказском районах и др.), так и в Закубанье (районы аула Уляп, Хатукай, станиц Клермесской, Ново-Лабинской и др.) Погребения северокавказской культуры известны как в виде насыпи, так и в грунтовых могилах. Количество предметов, захороненных с покойником, было незначительно.

Сравнение уровня социально-экономического развития носителей северокавказской культуры со связанной и предшествующей ей майкопской культурой позволяет сделать вывод о том, что в послемайкопское время процесс социально-экономического развития местного общества несколько затормозился. Представители северокавказской культуры не воздвигали богатых курганов, подобных майкопским. В материальных останках северокавказской культуры не столь отчетливо прослеживалась социальная дифференциация.
[INLINE_IMAGE_10]
Племена северокавказской культуры вели оседлый образ жизни. Основу хозяйства представителей северокавказской культуры составляли скотоводство и земледелие. Стада состояли из лошадей, мелкого и крупного рогатого скота. Следует отметить, что лошадь, как и у представителей майкопской культуры, использовалась для верховой езды. Северокавказцы возделывали пшеницу и ячмень. Земля обрабатывалась мотыгой, а урожай собирался серпом. Важнейшими занятиями племен северокавказской культуры были металлургия и металлообработка. 

Таким образом, на протяжении всего бронзового века на Северо-Западном Кавказе происходили сложные процессы развития племен и культур. Здесь был сформирован один из центров металлургии бронзы, получили широкое развитие земледелие, скотоводство и гончарное дело. 
`
            },
            {
                id: 'greece',
                title: 'Древняя Греция',
                image: '/images/ancient-greece.jpeg',
                inlineImages: [
                    {
                        url: '/images/greek-theater.jpeg',
                        caption: 'Древнегреческий амфитеатр — место рождения театрального искусства и демократических собраний',
                        alt: 'Древнегреческий амфитеатр'
                    },
                    {
                        url: '/images/greek-philosophy.jpeg',
                        caption: 'Древнегреческие философы — основатели западной философской традиции',
                        alt: 'Древнегреческие философы'
                    }
                ],
                content: `Древняя Греция — античная греческая цивилизация на юго-востоке Европы, существовавшая с III тысячелетия до н. э. до VI века н. э.

Основные периоды:
• Архаический период (VIII-VI вв. до н.э.)
• Классический период (V-IV вв. до н.э.)
• Эллинистический период (IV-I вв. до н.э.)

[INLINE_IMAGE_1]

Вклад в мировую цивилизацию:
• Демократия (афинская демократия) — основа современного народовластия
• Философия (Сократ, Платон, Аристотель) — фундамент западной мысли

[INLINE_IMAGE_2]

• Театр (трагедия и комедия) — искусство драмы
• Олимпийские игры — спортивные состязания
• Математика и геометрия (Евклид, Пифагор)
• История как наука (Геродот, Фукидид)

Греческие полисы-государства создали уникальную систему самоуправления и заложили основы западной цивилизации. Наследие Древней Греции живет в современной науке, искусстве и политике.`
            }
        ]
    },
];

export default function Home() {
    const [currentSection, setCurrentSection] = useState<Section | null>(null);
    const [currentTopic, setCurrentTopic] = useState<Topic | null>(null);
    const [isQuizMode, setIsQuizMode] = useState(false);
    const [isGlossaryMode, setIsGlossaryMode] = useState(false);
    const [currentQuestion, setCurrentQuestion] = useState(0);
    const [userAnswers, setUserAnswers] = useState<any[]>([]);
    const [selectedAnswer, setSelectedAnswer] = useState<any>(null);
    const [showResult, setShowResult] = useState(false);
    const [quizCompleted, setQuizCompleted] = useState(false);

    // Функции навигации
    const goToHome = () => {
        setCurrentSection(null);
        setCurrentTopic(null);
        setIsQuizMode(false);
        setIsGlossaryMode(false);
        resetQuiz();
    };

    const goToSection = () => {
        setCurrentTopic(null);
        setIsQuizMode(false);
        setIsGlossaryMode(false);
        resetQuiz();
    };

    const startQuiz = () => {
        setIsQuizMode(true);
        setIsGlossaryMode(false);
        resetQuiz();
    };

    const showGlossary = () => {
        setIsGlossaryMode(true);
        setIsQuizMode(false);
        resetQuiz();
    };

    const resetQuiz = () => {
        setCurrentQuestion(0);
        setUserAnswers([]);
        setSelectedAnswer(null);
        setShowResult(false);
        setQuizCompleted(false);
    };

    const handleAnswerSelect = (answer: any) => {
        setSelectedAnswer(answer);
    };

    const nextQuestion = () => {
        if (selectedAnswer !== null && selectedAnswer !== undefined && selectedAnswer !== '') {
            const newAnswers = [...userAnswers, selectedAnswer];
            setUserAnswers(newAnswers);

            if (currentSection && currentQuestion < currentSection.quiz.questions.length - 1) {
                setCurrentQuestion(currentQuestion + 1);
                setSelectedAnswer(getInitialAnswerState(currentSection.quiz.questions[currentQuestion + 1]));
            } else {
                setQuizCompleted(true);
                setShowResult(true);
            }
        }
    };
    // Функция для получения начального состояния ответа в зависимости от типа вопроса
    const getInitialAnswerState = (question: Question) => {
        switch (question.type) {
            case 'single':
                return null;
            case 'multiple':
                return [];
            case 'text':
                return '';
            case 'matching':
                return [];
            default:
                return null;
        }
    };

    // Проверка правильности ответов
    const checkAnswer = (question: Question, userAnswer: any): boolean => {
        switch (question.type) {
            case 'single':
                return userAnswer === question.correctAnswer;
            case 'multiple':
                return JSON.stringify([...userAnswer].sort()) === JSON.stringify([...question.correctAnswers].sort());
            case 'text':
                if (question.caseSensitive) {
                    return userAnswer.trim() === question.correctAnswer;
                }
                return userAnswer.trim().toLowerCase() === question.correctAnswer.toLowerCase();
            case 'matching':
                return JSON.stringify([...userAnswer].sort((a, b) => a.leftId - b.leftId)) ===
                    JSON.stringify([...question.correctMatches].sort((a, b) => a.leftId - b.leftId));
            default:
                return false;
        }
    };





    const restartQuiz = () => {
        resetQuiz();
    };

    const exitQuiz = () => {
        setIsQuizMode(false);
        resetQuiz();
    };

    const exitGlossary = () => {
        setIsGlossaryMode(false);
    };

    const calculateScore = () => {
        if (!currentSection) return 0;
        let correct = 0;
        userAnswers.forEach((answer, index) => {
            if (checkAnswer(currentSection.quiz.questions[index], answer)) {
                correct++;
            }
        });
        return correct;
    };


       // Отображение теста
    if (currentSection && isQuizMode) {
        const SectionIcon = currentSection.icon;
        const questions = currentSection.quiz.questions;

        const currentQ = questions[currentQuestion];
        const progress = ((currentQuestion + 1) / questions.length) * 100;

        // Функции для форматирования ответов
        const formatUserAnswer = (question: Question, answer: any): string => {
            switch (question.type) {
                case 'single':
                    return question.options[answer as number];
                case 'multiple':
                    return (answer as number[]).map(idx => question.options[idx]).join(', ');
                case 'text':
                    return answer as string;
                case 'matching':
                    return (answer as any[]).map(match => `${match.leftId}→${match.rightId}`).join(', ');
                default:
                    return '';
            }
        };

        const formatCorrectAnswer = (question: Question): string => {
            switch (question.type) {
                case 'single':
                    return question.options[(question as SingleChoiceQuestion).correctAnswer];
                case 'multiple':
                    return (question as MultipleChoiceQuestion).correctAnswers.map(idx => question.options[idx]).join(', ');
                case 'text':
                    return (question as TextAnswerQuestion).correctAnswer;
                case 'matching':
                    return (question as MatchingQuestion).correctMatches.map(match => `${match.leftId}→${match.rightId}`).join(', ');
                default:
                    return '';
            }
        };

        // Проверка готовности к следующему вопросу
        const isAnswerReady = () => {
            if (selectedAnswer === null || selectedAnswer === undefined) return false;
            if (currentQ.type === 'multiple' && selectedAnswer.length === 0) return false;
            if (currentQ.type === 'text' && selectedAnswer.trim() === '') return false;
            if (currentQ.type === 'matching' && selectedAnswer.length !== currentQ.leftColumn.length) return false;
            return true;
        };

        if (showResult) {
            const score = calculateScore();
            const percentage = Math.round((score / questions.length) * 100);

            return (
                <div className="min-h-screen bg-amber-50">
                    <div className="container mx-auto px-4 py-8 max-w-4xl">
                        <div className="mb-6">
                            <button
                                onClick={exitQuiz}
                                className="mb-4 flex items-center text-amber-800 hover:text-amber-900"
                            >
                                <ArrowLeft className="w-4 h-4 mr-2" />
                                Назад к разделу
                            </button>
                        </div>

                        <div className="border border-amber-200 rounded-lg p-6 bg-amber-100 text-center">
                            <div className="flex items-center justify-center gap-3 mb-4">
                                <div className="p-3 bg-amber-200 rounded-lg">
                                    <SectionIcon className="w-8 h-8 text-amber-800" />
                                </div>
                                <div>
                                    <h2 className="text-2xl font-bold text-amber-900">Тест завершен!</h2>
                                    <p className="text-amber-700">Раздел: {currentSection.title}</p>
                                </div>
                            </div>

                            <div className="text-6xl mb-4">
                                {percentage >= 80 ? '🎉' : percentage >= 60 ? '👍' : '📚'}
                            </div>

                            <div className="space-y-2">
                                <p className="text-amber-800">Ваш результат:</p>
                                <div className="flex items-center justify-center gap-2">
                                    <span className="text-3xl font-semibold text-amber-900">{score}</span>
                                    <span className="text-amber-700">из {questions.length}</span>
                                    <span className={`px-2 py-1 rounded-full text-sm ${percentage >= 80 ? 'bg-green-200 text-green-800' :
                                            percentage >= 60 ? 'bg-yellow-200 text-yellow-800' :
                                                'bg-red-200 text-red-800'
                                        }`}>
                                        {percentage}%
                                    </span>
                                </div>
                            </div>

                            <p className="text-amber-700 mt-4">
                                {percentage >= 80
                                    ? 'Отличный результат! Вы хорошо знаете этот исторический период.'
                                    : percentage >= 60
                                        ? 'Хороший результат! Рекомендуем повторить материал.'
                                        : 'Стоит изучить материал более внимательно и попробовать еще раз.'
                                }
                            </p>

                            <div className="space-y-3 mt-6">
                                {questions.map((question, index) => {
                                    const userAnswer = userAnswers[index];
                                    const isCorrect = checkAnswer(question, userAnswer);

                                    return (
                                        <div key={question.id} className="text-left p-4 border border-amber-200 rounded-lg bg-amber-50">
                                            <div className="flex items-start gap-3 mb-2">
                                                {isCorrect ? (
                                                    <CheckCircle className="w-5 h-5 text-green-600 mt-0.5 flex-shrink-0" />
                                                ) : (
                                                    <XCircle className="w-5 h-5 text-red-600 mt-0.5 flex-shrink-0" />
                                                )}
                                                <div className="flex-1">
                                                    <p className="mb-2 font-medium text-amber-900">{question.question}</p>
                                                    <p className="text-sm text-amber-700">
                                                        Ваш ответ: {formatUserAnswer(question, userAnswer)}
                                                    </p>
                                                    {!isCorrect && (
                                                        <p className="text-sm text-green-700 mt-1">
                                                            Правильный ответ: {formatCorrectAnswer(question)}
                                                        </p>
                                                    )}
                                                    <p className="text-sm text-amber-600 mt-2">
                                                        {question.explanation}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>

                            <div className="flex gap-3 justify-center pt-6">
                                <button
                                    onClick={restartQuiz}
                                    className="px-4 py-2 border border-amber-300 text-amber-800 rounded-md hover:bg-amber-200 flex items-center transition-colors"
                                >
                                    <RotateCcw className="w-4 h-4 mr-2" />
                                    Пройти еще раз
                                </button>
                                <button
                                    onClick={exitQuiz}
                                    className="px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 transition-colors"
                                >
                                    Вернуться к разделу
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }



        return (
            <div className="min-h-screen bg-amber-50">
                <div className="container mx-auto px-4 py-8 max-w-4xl">
                    <div className="mb-6">
                        <button
                            onClick={exitQuiz}
                            className="mb-4 flex items-center text-amber-800 hover:text-amber-900"
                        >
                            <ArrowLeft className="w-4 h-4 mr-2" />
                            Выйти из теста
                        </button>

                        <div className="space-y-3">
                            <div className="flex items-center justify-between">
                                <h2 className="text-xl font-semibold text-amber-900">Тест: {currentSection.title}</h2>
                                <span className="px-2 py-1 bg-amber-200 text-amber-800 rounded-md text-sm">
                                    {currentQuestion + 1} из {questions.length}
                                </span>
                            </div>
                            <div className="w-full bg-amber-200 rounded-full h-2">
                                <div
                                    className="bg-amber-600 h-2 rounded-full transition-all duration-300"
                                    style={{ width: `${progress}%` }}
                                ></div>
                            </div>
                        </div>
                    </div>

                    <div className="border border-amber-200 rounded-lg p-6 bg-amber-100">
                        <h3 className="text-xl font-semibold mb-6 text-amber-900">{currentQ.question}</h3>

                        {/* Рендеринг соответствующего типа вопроса */}
                        {currentQ.type === 'single' && (
                            <SingleChoiceQuestionComponent
                                question={currentQ}
                                selectedAnswer={selectedAnswer}
                                onAnswerSelect={handleAnswerSelect}
                            />
                        )}

                        {currentQ.type === 'multiple' && (
                            <MultipleChoiceQuestionComponent
                                question={currentQ}
                                selectedAnswers={selectedAnswer}
                                onAnswerSelect={handleAnswerSelect}
                            />
                        )}

                        {currentQ.type === 'text' && (
                            <TextAnswerQuestionComponent
                                question={currentQ}
                                answer={selectedAnswer}
                                onAnswerChange={handleAnswerSelect}
                            />
                        )}

                        {currentQ.type === 'matching' && (
                            <MatchingQuestionComponent
                                question={currentQ}
                                matches={selectedAnswer}
                                onMatchesChange={handleAnswerSelect}
                            />
                        )}

                        <div className="flex justify-end pt-6">
                            <button
                                onClick={nextQuestion}
                                disabled={!isAnswerReady()}
                                className={`px-6 py-2 rounded-md transition-colors ${!isAnswerReady()
                                        ? 'bg-amber-300 text-amber-500 cursor-not-allowed'
                                        : 'bg-amber-600 text-white hover:bg-amber-700'
                                    }`}
                            >
                                {currentQuestion === questions.length - 1 ? 'Завершить тест' : 'Следующий вопрос'}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        );
    }
    // Отображение содержания темы
    if (currentTopic && currentSection) {
        return (
            <div className="min-h-screen bg-amber-50">
                <div className="container mx-auto px-4 py-8 max-w-4xl">
                    <div className="mb-6">
                        <button
                            onClick={goToSection}
                            className="mb-2 flex items-center text-amber-800 hover:text-amber-900"
                        >
                            <ArrowLeft className="w-4 h-4 mr-2" />
                            Назад к разделу "{currentSection.title}"
                        </button>
                        <nav className="text-sm text-amber-700">
                            <span
                                className="cursor-pointer hover:text-amber-900"
                                onClick={goToHome}
                            >
                                Главная
                            </span>
                            {' > '}
                            <span
                                className="cursor-pointer hover:text-amber-900"
                                onClick={goToSection}
                            >
                                {currentSection.title}
                            </span>
                            {' > '}
                            <span>{currentTopic.title}</span>
                        </nav>
                    </div>

                    <article className="bg-amber-100 border border-amber-200 rounded-lg shadow-lg p-6">
                        <div className="mb-6">
                            <Image
                                src={currentTopic.image}
                                alt={currentTopic.title}
                                width={800}
                                height={400}
                                className="w-full h-64 object-cover rounded-lg border-2 border-amber-300"
                            />
                        </div>

                        <div className="prose prose-lg max-w-none">
                            <h1 className="text-3xl font-bold mb-4 text-amber-900">{currentTopic.title}</h1>
                            <div className="text-amber-800 leading-relaxed bg-amber-50 p-6 rounded-lg border border-amber-200">
                                {parseContentWithImages(currentTopic.content, currentTopic.inlineImages)}
                            </div>
                        </div>
                    </article>
                </div>
            </div>
        );
    }


    // Отображение глоссария
    if (currentSection && isGlossaryMode) {
        const SectionIcon = currentSection.icon;

        return (
            <div className="min-h-screen bg-amber-50">
                <div className="container mx-auto px-4 py-8 max-w-6xl">
                    <div className="mb-8">
                        <button
                            onClick={exitGlossary}
                            className="mb-4 flex items-center text-amber-800 hover:text-amber-900"
                        >
                            <ArrowLeft className="w-4 h-4 mr-2" />
                            Назад к разделу
                        </button>

                        <div className="flex items-center gap-4 mb-6">
                            <div className="p-3 bg-amber-200 rounded-lg">
                                <SectionIcon className="w-8 h-8 text-amber-800" />
                            </div>
                            <div>
                                <h1 className="text-3xl font-bold mb-2 text-amber-900">Глоссарий: {currentSection.title}</h1>
                                <p className="text-amber-700">Словарь основных терминов и понятий</p>
                            </div>
                        </div>
                    </div>

                    <div className="grid gap-4 md:grid-cols-2">
                        {currentSection.glossary.map((term, index) => (
                            <div key={index} className="border border-amber-200 rounded-lg p-6 bg-amber-100 hover:bg-amber-200 transition-colors">
                                <h3 className="text-xl font-semibold flex items-center gap-3 mb-3 text-amber-900">
                                    <BookOpen className="w-5 h-5 text-amber-700" />
                                    {term.term}
                                </h3>
                                <p className="text-amber-800">
                                    {term.definition}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );
    }

    // Отображение списка тем в разделе
    if (currentSection) {
        const SectionIcon = currentSection.icon;

        return (
            <div className="min-h-screen bg-amber-50">
                <div className="container mx-auto px-4 py-8 max-w-6xl">
                    <div className="mb-8">
                        <button
                            onClick={goToHome}
                            className="mb-4 flex items-center text-amber-800 hover:text-amber-900"
                        >
                            <ArrowLeft className="w-4 h-4 mr-2" />
                            Назад к разделам
                        </button>

                        {/* ИЗМЕНЕНИЯ НАЧИНАЮТСЯ ЗДЕСЬ */}
                        <div className="flex flex-col gap-6 mb-6">
                            <div className="flex items-center gap-4">
                                <div className="p-3 bg-amber-200 rounded-lg">
                                    <SectionIcon className="w-8 h-8 text-amber-800" />
                                </div>
                                <div className="flex-1">
                                    <h1 className="text-3xl font-bold mb-2 text-amber-900">{currentSection.title}</h1>
                                    <p className="text-amber-700">{currentSection.description}</p>
                                </div>
                            </div>

                            <div className="flex gap-3">
                                <button
                                    onClick={showGlossary}
                                    className="px-4 py-2 border border-amber-300 text-amber-800 rounded-md hover:bg-amber-200 flex items-center gap-2 transition-colors"
                                >
                                    <BookOpen className="w-5 h-5" />
                                    Глоссарий
                                </button>
                                <button
                                    onClick={startQuiz}
                                    className="px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 flex items-center gap-2 transition-colors"
                                >
                                    <Brain className="w-5 h-5" />
                                    Пройти тест
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="grid gap-6 md:grid-cols-2">
                        {currentSection.topics.map((topic) => (
                            <div
                                key={topic.id}
                                className="cursor-pointer border border-amber-200 rounded-lg hover:shadow-lg transition-all duration-200 overflow-hidden bg-amber-100 hover:bg-amber-200"
                                onClick={() => setCurrentTopic(topic)}
                            >
                                <div className="aspect-video relative">
                                    <Image
                                        src={topic.image}
                                        alt={topic.title}
                                        fill
                                        className="object-cover"
                                    />
                                </div>
                                <div className="p-6">
                                    <h3 className="text-xl font-semibold flex items-center gap-3 mb-3 text-amber-900">
                                        <Book className="w-5 h-5 text-amber-700" />
                                        {topic.title}
                                    </h3>
                                    <p className="text-amber-800 line-clamp-3">
                                        {topic.content.split('\n')[0]}
                                    </p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );
    }

    // Главная страница с разделами
    return (
        <div className="min-h-screen bg-amber-50">
            <div className="container mx-auto px-4 py-8 max-w-6xl">
                <div className="text-center mb-12">
                    <h1 className="text-4xl font-bold mb-4 text-amber-900">Исторический портал</h1>
                    <p className="text-amber-700 max-w-2xl mx-auto">
                        Изучайте историю человечества от древних цивилизаций до современности.
                        Выберите интересующий вас период для погружения в исторические события и факты.
                    </p>
                </div>

                <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-2">
                    {sections.map((section) => {
                        const SectionIcon = section.icon;

                        return (
                            <div
                                key={section.id}
                                className="cursor-pointer border border-amber-200 rounded-lg p-6 hover:shadow-lg transition-all duration-200 bg-amber-100 hover:bg-amber-200"
                                onClick={() => setCurrentSection(section)}
                            >
                                <div className="mb-4">
                                    <div className="flex items-center gap-4">
                                        <div className="p-3 bg-amber-200 rounded-lg">
                                            <SectionIcon className="w-8 h-8 text-amber-800" />
                                        </div>
                                        <div>
                                            <h3 className="text-xl font-semibold text-amber-900">{section.title}</h3>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <p className="text-amber-800 mb-4">
                                        {section.description}
                                    </p>
                                    <div className="flex items-center justify-between text-sm text-amber-700">
                                        <span>
                                            {section.topics.length} {section.topics.length === 1 ? 'тема' :
                                            section.topics.length < 5 ? 'темы' : 'тем'}
                                        </span>
                                        <span>
                                            {section.glossary.length} терминов в глоссарии
                                        </span>
                                    </div>
                                </div>
                            </div>
                        );
                    })}
                </div>
            </div>
        </div>
    );


}

